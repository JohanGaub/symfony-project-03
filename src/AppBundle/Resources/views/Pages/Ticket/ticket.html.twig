{% extends ('@App/Layout/backoffice-base.html.twig') %}

{% block body %}
    <section class="form-all">

        <div class="row">
            <div class="col-xs-12 col-xs-offset-0 col-lg-10 col-lg-offset-1">
                <h2>Liste des tickets</h2>

                <div class="row">
                    {{ form_start(searchForm) }}
                    <div class="col-xs-3">{{ form_row(searchForm.id) }}</div>
                    <div class="col-xs-3">{{ form_row(searchForm.company) }}</div>
                    <div class="col-xs-3">{{ form_row(searchForm.emergency) }}</div>
                    <div class="col-xs-3">{{ form_row(searchForm.subject) }}</div>
                </div>

                <div class="row">
                    <div class="col-xs-3">{{ form_row(searchForm.status) }}</div>
                    <div class="col-xs-3">{{ form_row(searchForm.creationDate) }}</div>
                    <div class="col-xs-3">{{ form_row(searchForm.endDate) }}</div>
                    <div class="col-xs-3">{{ form_row(searchForm.submit) }}</div>
                    {{ form_end(searchForm) }}
                </div>

            </div>
        </div>



        <div class="row">
            <div class="col-xs-12 col-xs-offset-0 col-lg-10 col-lg-offset-1">

                <table id="filter" class="table table-responsive table-bordered table-condensed">
                    <thead >
                    <tr class="text-center">
                        <th>N° de ticket</th>
                        <th>Société</th>
                        <th>Urgence</th>
                        <th>Sujet</th>
                        <th>Statut</th>
                        <th>Date de création</th>
                        <th>Date de clôture</th>
                    </tr>
                    </thead>

                    <tbody class="table-striped">

                    {%  for d in data %}
                        <tr>
                            <td><a href="{{ path('ticket_edit', {"ticket": d.id }) }}">{{ d.id }}</a></td>
                            <td><a href="{{ path('ticket_edit', {"ticket": d.id}) }}">{{ d.user.company.name }}</a></td>
                            <td><a href="{{ path('ticket_edit', {"ticket": d.id}) }}">{{ d.emergency }}</a></td>
                            <td><a href="{{ path('ticket_edit', {"ticket": d.id}) }}">{{ d.subject }}</a></td>
                            <td><a href="{{ path('ticket_edit', {"ticket": d.id}) }}">{{ d.status }}</a></td>
                            <td><a href="{{ path('ticket_edit', {"ticket": d.id}) }}">{{ d.creationdate|date("d/m/Y") }}</a></td>
                            <td><a href="{{ path('ticket_edit', {"ticket": d.id}) }}">{{ d.Enddate|date("d/m/Y") }}</a></td>
                        </tr>
                    {% endfor %}

                    </tbody>
                </table>
            </div>
        </div>


        <div class="row text-center">
            <div class="col-xs-8 col-xs-offset-2">
                {% include('@App/Elements/paginator.html.twig') %}
            </div>
        </div>


        <div class="row">
            <div class="col-xs-12 col-xs-offset-0 col-lg-10 col-lg-offset-1">
                <div>
                    <a class="btn btn-model-small" href="{{ path('ticket_add') }}">Ajouter un ticket</a>
                </div>
            </div>
        </div>



    </section>




{% endblock %}

